# 📚 IOCTL_TTY Manual

> *Beautiful, readable documentation for command-line tools*

---

[ioctl_tty(2)](ioctl_tty.html)                                                                                System Calls Manual                                                                                [ioctl_tty(2)](ioctl_tty.html)


## 📑 Table of Contents

- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Author](#author)
  - [Reporting Bugs](#reporting-bugs)
  - [Copyright](#copyright)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
- [Files](#files)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [History](#history)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Environment](#environment)
- [Files](#files)
- [See Also](#see-also)
- [Authors](#authors)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
  - [Exit Codes](#exit-codes)
- [See Also](#see-also)
- [Examples](#examples)
- [Authors](#authors)
  - [Copyright](#copyright)
  - [Notes](#notes)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
  - [Notes](#notes)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Interactive Commands](#interactive-commands)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
- [Files](#files)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
- [Examples](#examples)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Examples](#examples)
  - [Reporting Bugs](#reporting-bugs)
  - [Copyright](#copyright)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
  - [Caveats](#caveats)
- [Files](#files)
  - [Exit Values](#exit-values)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
  - [Compatibility](#compatibility)
  - [Bugs](#bugs)
- [See Also](#see-also)
  - [Reporting Bugs](#reporting-bugs)
  - [Availability](#availability)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Attributes](#attributes)
  - [Versions](#versions)
  - [Standards](#standards)
  - [History](#history)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
  - [Caveats](#caveats)
  - [Configuration](#configuration)
- [Files](#files)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Author](#author)
  - [Reporting Bugs](#reporting-bugs)
  - [Copyright](#copyright)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Versions](#versions)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
- [Examples](#examples)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Files](#files)
- [Examples](#examples)
- [See Also](#see-also)
- [Authors](#authors)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Attributes](#attributes)
  - [Versions](#versions)
  - [Versions](#versions)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
  - [Bugs](#bugs)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Default Key Bindings](#default-key-bindings)
  - [Command Parsing And Execution](#command-parsing-and-execution)
  - [Parsing Syntax](#parsing-syntax)
  - [Commands](#commands)
  - [Clients And Sessions](#clients-and-sessions)
  - [Windows And Panes](#windows-and-panes)
  - [Key Bindings](#key-bindings)
- [Options](#options)
  - [Hooks](#hooks)
  - [Mouse Support](#mouse-support)
  - [Formats](#formats)
  - [Styles](#styles)
  - [Names And Titles](#names-and-titles)
  - [Global And Session Environment](#global-and-session-environment)
  - [Status Line](#status-line)
  - [Buffers](#buffers)
  - [Miscellaneous](#miscellaneous)
  - [Exit Messages](#exit-messages)
  - [Terminfo Extensions](#terminfo-extensions)
  - [Control Mode](#control-mode)
- [Environment](#environment)
- [Files](#files)
- [Examples](#examples)
- [See Also](#see-also)
- [Authors](#authors)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
  - [Commands](#commands)
  - [Display Names](#display-names)
  - [Example](#example)
- [Environment](#environment)
- [Files](#files)
- [See Also](#see-also)
  - [Bugs](#bugs)
  - [Author](#author)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
- [Files](#files)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Examples](#examples)
  - [Author](#author)
  - [Reporting Bugs](#reporting-bugs)
  - [Copyright](#copyright)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [String1 = String2](#string1-=-string2)
  - [String1 != String2](#string1-!=-string2)
  - [Author](#author)
  - [Reporting Bugs](#reporting-bugs)
  - [Copyright](#copyright)
- [See Also](#see-also)
- [Name](#name)
- [Description](#description)
- [Files](#files)
  - [Notes](#notes)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
- [See Also](#see-also)
  - [Author](#author)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Notes](#notes)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
- [Environment](#environment)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
  - [Bugs](#bugs)
- [Examples](#examples)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [History](#history)
  - [Caveats](#caveats)
  - [Bugs](#bugs)
- [Examples](#examples)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [History](#history)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [History](#history)
  - [Bugs](#bugs)
- [See Also](#see-also)
- [Name](#name)
- [Description](#description)
- [Files](#files)
  - [Standards](#standards)
  - [Posix.2.](#posix.2.)
- [Examples](#examples)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
  - [Advanced Usage](#advanced-usage)
- [Environment](#environment)
- [See Also](#see-also)
  - [Diagnostics](#diagnostics)
  - [Caveats](#caveats)
  - [Bugs](#bugs)
  - [Reporting Bugs](#reporting-bugs)
  - [Copyright Notice](#copyright-notice)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Versions](#versions)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
  - [Posix.1-2001, 4.2Bsd.](#posix.1-2001,-4.2bsd.)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
- [Examples](#examples)
- [See Also](#see-also)
  - [Standards](#standards)
  - [Author](#author)
  - [Reporting Bugs](#reporting-bugs)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
  - [Posix.1-2001, Posix.2.](#posix.1-2001,-posix.2.)
  - [Notes](#notes)
  - [Bugs](#bugs)
- [Examples](#examples)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Versions](#versions)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
- [Files](#files)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
- [Examples](#examples)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
- [Files](#files)
  - [Attributes](#attributes)
  - [Versions](#versions)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Note](#note)
- [Files](#files)
  - [Attributes](#attributes)
  - [Versions](#versions)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
  - [Notes](#notes)
- [Examples](#examples)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Versions](#versions)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
  - [Notes](#notes)
- [Examples](#examples)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [* [-]Lcase](#*-[-]lcase)
  - [Author](#author)
  - [Reporting Bugs](#reporting-bugs)
  - [Copyright](#copyright)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Portability](#portability)
- [Authors](#authors)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
- [Files](#files)
- [Authors](#authors)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
- [Environment](#environment)
- [Files](#files)
  - [Portability](#portability)
  - [History](#history)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Fionread](#fionread)
  - [Tiocinq](#tiocinq)
  - [Tiocoutq](#tiocoutq)
  - [Tiocsti](#tiocsti)
  - [Tioccons](#tioccons)
  - [Tiocsctty](#tiocsctty)
  - [Tiocnotty](#tiocnotty)
  - [Tiocgpgrp](#tiocgpgrp)
  - [Tiocspgrp](#tiocspgrp)
  - [Tiocgsid](#tiocgsid)
  - [Tiocexcl](#tiocexcl)
  - [Tiocgexcl](#tiocgexcl)
  - [Tiocnxcl](#tiocnxcl)
  - [Tiocgetd](#tiocgetd)
  - [Tiocsetd](#tiocsetd)
  - [Tiocpkt](#tiocpkt)
  - [Tiocgpkt](#tiocgpkt)
  - [Tiocsptlck](#tiocsptlck)
  - [Tiocgptlck](#tiocgptlck)
  - [Tiocgptpeer](#tiocgptpeer)
  - [Tiocmget](#tiocmget)
  - [Tiocmset](#tiocmset)
  - [Tiocmbic](#tiocmbic)
  - [Tiocmbis](#tiocmbis)
  - [Tiocgsoftcar](#tiocgsoftcar)
  - [Tiocssoftcar](#tiocssoftcar)
  - [Return Value](#return-value)
  - [Errors](#errors)
- [Examples](#examples)
- [See Also](#see-also)


## Name {#name}

```
ioctl_tty - ioctls for terminals and serial lines
```



### Library {#library}

```
Standard C library (libc, -lc)
```



## Synopsis {#synopsis}

```
#include <sys/ioctl.h>
#include <asm/termbits.h>   /* Definition of struct termios,
                               struct termios2, and
                               Bnnn, BOTHER, CBAUD, CLOCAL,
                               TC*{FLUSH,ON,OFF} and other constants */

int ioctl(int fd, int op, ...);
```



## Description {#description}

```
The ioctl(2) call for terminals and serial ports accepts many possible operation arguments.  Most require a third argument, of varying type, here called argp or arg.

Use of ioctl() makes for nonportable programs.  Use the POSIX interface described in termios(3) whenever possible.

Please note that struct termios from <asm/termbits.h> is different and incompatible with struct termios from <termios.h>.  These ioctl calls require struct termios from <asm/termbits.h>.
```


   Get and set terminal attributes
```
TCGETS Argument: struct termios *argp

       Equivalent to tcgetattr(fd, argp).

       Get the current serial port settings.

TCSETS Argument: const struct termios *argp

       Equivalent to tcsetattr(fd, TCSANOW, argp).

       Set the current serial port settings.

TCSETSW
       Argument: const struct termios *argp

       Equivalent to tcsetattr(fd, TCSADRAIN, argp).

       Allow the output buffer to drain, and set the current serial port settings.

TCSETSF
       Argument: const struct termios *argp

       Equivalent to tcsetattr(fd, TCSAFLUSH, argp).

       Allow the output buffer to drain, discard pending input, and set the current serial port settings.

The  following four ioctls, added in Linux 2.6.20, are just like TCGETS, TCSETS, TCSETSW, TCSETSF, except that they take a struct termios2 * instead of a struct termios *.  If the structure member
c_cflag contains the flag BOTHER, then the baud rate is stored in the structure members c_ispeed and c_ospeed as integer values.  These ioctls are not supported on all architectures.
       TCGETS2    struct termios2 *argp
       TCSETS2    const struct termios2 *argp
       TCSETSW2   const struct termios2 *argp
       TCSETSF2   const struct termios2 *argp

The following four ioctls are just like TCGETS, TCSETS, TCSETSW, TCSETSF, except that they take a struct termio * instead of a struct termios *.
       TCGETA    struct termio *argp
       TCSETA    const struct termio *argp
       TCSETAW   const struct termio *argp
       TCSETAF   const struct termio *argp
```


   Locking the termios structure
```
The termios structure of a terminal can be locked.  The lock is itself a termios structure, with nonzero bits or fields indicating a locked value.

TIOCGLCKTRMIOS
       Argument: struct termios *argp

       Gets the locking status of the termios structure of the terminal.

TIOCSLCKTRMIOS
       Argument: const struct termios *argp

       Sets the locking status of the termios structure of the terminal.  Only a process with the CAP_SYS_ADMIN capability can do this.
```


   Get and set window size
```
Window sizes are kept in the kernel, but not used by the kernel (except in the case of virtual consoles, where the kernel will update the window size when the size of the virtual console  changes,
for example, by loading a new font).

TIOCGWINSZ
       Argument: struct winsize *argp

       Get window size.

TIOCSWINSZ
       Argument: const struct winsize *argp

       Set window size.

The struct used by these ioctls is defined as

    struct winsize {
        unsigned short ws_row;
        unsigned short ws_col;
        unsigned short ws_xpixel;   /* unused */
        unsigned short ws_ypixel;   /* unused */
    };

When the window size changes, a SIGWINCH signal is sent to the foreground process group.
```


   Sending a break
```
TCSBRK Argument: int arg

       Equivalent to tcsendbreak(fd, arg).

       If  the  terminal  is using asynchronous serial data transmission, and arg is zero, then send a break (a stream of zero bits) for between 0.25 and 0.5 seconds.  If the terminal is not using
       asynchronous serial data transmission, then either a break is sent, or the function returns without doing anything.  When arg is nonzero, nobody knows what will happen.

       (SVr4, UnixWare, Solaris, and Linux treat tcsendbreak(fd,arg) with nonzero arg like tcdrain(fd).  SunOS treats arg as a multiplier, and sends a stream of bits arg times as long as done  for
       zero arg.  DG/UX and AIX treat arg (when nonzero) as a time interval measured in milliseconds.  HP-UX ignores arg.)

TCSBRKP
       Argument: int arg

       So-called "POSIX version" of TCSBRK.  It treats nonzero arg as a time interval measured in deciseconds, and does nothing when the driver does not support breaks.

TIOCSBRK
       Argument: void

       Turn break on, that is, start sending zero bits.

TIOCCBRK
       Argument: void

       Turn break off, that is, stop sending zero bits.
```


   Software flow control
```
TCXONC Argument: int arg

       Equivalent to tcflow(fd, arg).

       See tcflow(3) for the argument values TCOOFF, TCOON, TCIOFF, TCION.
```


   Buffer count and flushing

### Fionread {#fionread}

```
Argument: int *argp

Get the number of bytes in the input buffer.

```


### Tiocinq {#tiocinq}

```
Argument: int *argp

Same as FIONREAD.

```


### Tiocoutq {#tiocoutq}

```
Argument: int *argp

Get the number of bytes in the output buffer.

```

```
TCFLSH Argument: int arg

       Equivalent to tcflush(fd, arg).

       See tcflush(3) for the argument values TCIFLUSH, TCOFLUSH, TCIOFLUSH.

TIOCSERGETLSR
       Argument: int *argp

       Get line status register.  Status register has TIOCSER_TEMT bit set when output buffer is empty and also hardware transmitter is physically empty.

       Does not have to be supported by all serial tty drivers.

       tcdrain(3) does not wait and returns immediately when TIOCSER_TEMT bit is set.
```


   Faking input

### Tiocsti {#tiocsti}

```
Argument: const char *argp

Insert the given byte in the input queue.

Since Linux 6.2, this operation may require the CAP_SYS_ADMIN capability (if the dev.tty.legacy_tiocsti sysctl variable is set to false).
```


   Redirecting console output

### Tioccons {#tioccons}

```
Argument: void

Redirect  output  that  would  have gone to /dev/console or /dev/tty0 to the given terminal.  If that was a pseudoterminal master, send it to the slave.  Before Linux 2.6.10, anybody can do
this as long as the output was not redirected yet; since Linux 2.6.10, only a process with the CAP_SYS_ADMIN capability may do this.  If output was redirected already,  then  EBUSY  is  re‐
turned, but redirection can be stopped by using this ioctl with fd pointing at /dev/console or /dev/tty0.
```


   Controlling terminal

### Tiocsctty {#tiocsctty}

```
Argument: int arg

Make  the  given  terminal  the  controlling  terminal of the calling process.  The calling process must be a session leader and not have a controlling terminal already.  For this case, arg
should be specified as zero.

If this terminal is already the controlling terminal of a different session group, then the ioctl fails with EPERM, unless the caller has the CAP_SYS_ADMIN capability and arg equals  1,  in
which case the terminal is stolen, and all processes that had it as controlling terminal lose it.

```


### Tiocnotty {#tiocnotty}

```
Argument: void

If  the  given terminal was the controlling terminal of the calling process, give up this controlling terminal.  If the process was session leader, then send SIGHUP and SIGCONT to the fore‐
ground process group and all processes in the current session lose their controlling terminal.
```


   Process group and session ID

### Tiocgpgrp {#tiocgpgrp}

```
Argument: pid_t *argp

When successful, equivalent to *argp = tcgetpgrp(fd).

Get the process group ID of the foreground process group on this terminal.

```


### Tiocspgrp {#tiocspgrp}

```
Argument: const pid_t *argp

Equivalent to tcsetpgrp(fd, *argp).

Set the foreground process group ID of this terminal.

```


### Tiocgsid {#tiocgsid}

```
Argument: pid_t *argp

When successful, equivalent to *argp = tcgetsid(fd).

Get the session ID of the given terminal.  This fails with the error ENOTTY if the terminal is not a master pseudoterminal and not our controlling terminal.  Strange.
```


   Exclusive mode

### Tiocexcl {#tiocexcl}

```
Argument: void

Put the terminal into exclusive mode.  No further open(2) operations on the terminal are permitted.  (They fail with EBUSY, except for a process with the CAP_SYS_ADMIN capability.)

```


### Tiocgexcl {#tiocgexcl}

```
Argument: int *argp

(since Linux 3.8) If the terminal is currently in exclusive mode, place a nonzero value in the location pointed to by argp; otherwise, place zero in *argp.

```


### Tiocnxcl {#tiocnxcl}

```
Argument: void

Disable exclusive mode.
```


   Line discipline

### Tiocgetd {#tiocgetd}

```
Argument: int *argp

Get the line discipline of the terminal.

```


### Tiocsetd {#tiocsetd}

```
Argument: const int *argp

Set the line discipline of the terminal.
```


   Pseudoterminal ioctls

### Tiocpkt {#tiocpkt}

```
Argument: const int *argp

Enable (when *argp is nonzero) or disable packet mode.  Can be applied to the master side of a pseudoterminal only (and will return ENOTTY  otherwise).   In  packet  mode,  each  subsequent
read(2)  will  return a packet that either contains a single nonzero control byte, or has a single byte containing zero ('\0') followed by data written on the slave side of the pseudotermi‐
nal.  If the first byte is not TIOCPKT_DATA (0), it is an OR of one or more of the following bits:

TIOCPKT_FLUSHREAD    The read queue for the terminal is flushed.
TIOCPKT_FLUSHWRITE   The write queue for the terminal is flushed.
TIOCPKT_STOP         Output to the terminal is stopped.
TIOCPKT_START        Output to the terminal is restarted.
TIOCPKT_DOSTOP       The start and stop characters are ^S/^Q.
TIOCPKT_NOSTOP       The start and stop characters are not ^S/^Q.

While packet mode is in use, the presence of control status information to be read from the master side may be detected by a select(2) for exceptional conditions or a poll(2) for the  POLL‐
PRI event.

This mode is used by rlogin(1) and rlogind(8) to implement a remote-echoed, locally ^S/^Q flow-controlled remote login.

```


### Tiocgpkt {#tiocgpkt}

```
Argument: const int *argp

(since Linux 3.8) Return the current packet mode setting in the integer pointed to by argp.

```


### Tiocsptlck {#tiocsptlck}

```
Argument: int *argp

Set (if *argp is nonzero) or remove (if *argp is zero) the lock on the pseudoterminal slave device.  (See also unlockpt(3).)

```


### Tiocgptlck {#tiocgptlck}

```
Argument: int *argp

(since Linux 3.8) Place the current lock state of the pseudoterminal slave device in the location pointed to by argp.

```


### Tiocgptpeer {#tiocgptpeer}

```
Argument: int flags

(since  Linux  4.13) Given a file descriptor in fd that refers to a pseudoterminal master, open (with the given open(2)-style flags) and return a new file descriptor that refers to the peer
pseudoterminal slave device.  This operation can be performed regardless of whether the pathname of the slave device is accessible through the calling process's mount namespace.

Security-conscious programs interacting with namespaces may wish to use this operation rather than open(2) with the pathname returned by ptsname(3), and similar library functions that  have
insecure APIs.  (For example, confusion can occur in some cases using ptsname(3) with a pathname where a devpts filesystem has been mounted in a different mount namespace.)

```

```
The BSD ioctls TIOCSTOP, TIOCSTART, TIOCUCNTL, and TIOCREMOTE have not been implemented under Linux.
```


   Modem control

### Tiocmget {#tiocmget}

```
Argument: int *argp

Get the status of modem bits.

```


### Tiocmset {#tiocmset}

```
Argument: const int *argp

Set the status of modem bits.

```


### Tiocmbic {#tiocmbic}

```
Argument: const int *argp

Clear the indicated modem bits.

```


### Tiocmbis {#tiocmbis}

```
Argument: const int *argp

Set the indicated modem bits.

```

```
The following bits are used by the above ioctls:

TIOCM_LE    DSR (data set ready/line enable)
TIOCM_DTR   DTR (data terminal ready)
TIOCM_RTS   RTS (request to send)
TIOCM_ST    Secondary TXD (transmit)
TIOCM_SR    Secondary RXD (receive)
TIOCM_CTS   CTS (clear to send)
TIOCM_CAR   DCD (data carrier detect)
TIOCM_CD    see TIOCM_CAR
TIOCM_RNG   RNG (ring)
TIOCM_RI    see TIOCM_RNG
TIOCM_DSR   DSR (data set ready)

TIOCMIWAIT
       Argument: int arg

       Wait  for any of the 4 modem bits (DCD, RI, DSR, CTS) to change.  The bits of interest are specified as a bit mask in arg, by ORing together any of the bit values, TIOCM_RNG, TIOCM_DSR, TI‐
       OCM_CD, and TIOCM_CTS.  The caller should use TIOCGICOUNT to see which bit has changed.

TIOCGICOUNT
       Argument: struct serial_icounter_struct *argp

       Get counts of input serial line interrupts (DCD, RI, DSR, CTS).  The counts are written to the serial_icounter_struct structure pointed to by argp.

       Note: both 1->0 and 0->1 transitions are counted, except for RI, where only 0->1 transitions are counted.
```


   Marking a line as local

### Tiocgsoftcar {#tiocgsoftcar}

```
Argument: int *argp

("Get software carrier flag") Get the status of the CLOCAL flag in the c_cflag field of the termios structure.

```


### Tiocssoftcar {#tiocssoftcar}

```
Argument: const int *argp

("Set software carrier flag") Set the CLOCAL flag in the termios structure when *argp is nonzero, and clear it otherwise.

```

```
If the CLOCAL flag for a line is off, the hardware carrier detect (DCD) signal is significant, and an open(2) of the corresponding terminal will block until DCD is asserted, unless the  O_NONBLOCK
flag is given.  If CLOCAL is set, the line behaves as if DCD is always asserted.  The software carrier flag is usually turned on for local devices, and is off for lines with modems.
```


   Linux-specific
```
For the TIOCLINUX ioctl, see ioctl_console(2).
```


   Kernel debugging
```
#include <linux/tty.h>

TIOCTTYGSTRUCT
       Argument: struct tty_struct *argp

       Get the tty_struct corresponding to fd.  This operation was removed in Linux 2.5.67.
```



### Return Value {#return-value}

```
The ioctl(2) system call returns 0 on success.  On error, it returns -1 and sets errno to indicate the error.
```



### Errors {#errors}

```
EINVAL Invalid operation parameter.

ENOIOCTLCMD
       Unknown operation.

ENOTTY Inappropriate fd.

EPERM  Insufficient permission.
```



## Examples {#examples}

```
Check the condition of DTR on the serial port.

#include <fcntl.h>
#include <stdio.h>
#include <sys/ioctl.h>
#include <unistd.h>

int
main(void)
{
    int fd, serial;

    fd = open("/dev/ttyS0", O_RDONLY);
    ioctl(fd, TIOCMGET, &serial);
    if (serial & TIOCM_DTR)
        puts("TIOCM_DTR is set");
    else
        puts("TIOCM_DTR is not set");
    close(fd);
}

Get or set arbitrary baudrate on the serial port.

/* SPDX-License-Identifier: GPL-2.0-or-later */

#include <asm/termbits.h>
#include <fcntl.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/ioctl.h>
#include <unistd.h>

int
main(int argc, char *argv[])
{
#if !defined BOTHER
    fprintf(stderr, "BOTHER is unsupported\n");
    /* Program may fallback to TCGETS/TCSETS with Bnnn constants */
    exit(EXIT_FAILURE);
#else
    /* Declare tio structure, its type depends on supported ioctl */
# if defined TCGETS2
    struct termios2 tio;
# else
    struct termios tio;
# endif
    int fd, rc;

    if (argc != 2 && argc != 3 && argc != 4) {
        fprintf(stderr, "Usage: %s device [output [input] ]\n", argv[0]);
        exit(EXIT_FAILURE);
    }

    fd = open(argv[1], O_RDWR | O_NONBLOCK | O_NOCTTY);
    if (fd < 0) {
        perror("open");
        exit(EXIT_FAILURE);
    }

    /* Get the current serial port settings via supported ioctl */
# if defined TCGETS2
    rc = ioctl(fd, TCGETS2, &tio);
# else
    rc = ioctl(fd, TCGETS, &tio);
# endif
    if (rc) {
        perror("TCGETS");
        close(fd);
        exit(EXIT_FAILURE);
    }

    /* Change baud rate when more arguments were provided */
    if (argc == 3 || argc == 4) {
        /* Clear the current output baud rate and fill a new value */
        tio.c_cflag &= ~CBAUD;
        tio.c_cflag |= BOTHER;
        tio.c_ospeed = atoi(argv[2]);

        /* Clear the current input baud rate and fill a new value */
        tio.c_cflag &= ~(CBAUD << IBSHIFT);
        tio.c_cflag |= BOTHER << IBSHIFT;
        /* When 4th argument is not provided reuse output baud rate */
        tio.c_ispeed = (argc == 4) ? atoi(argv[3]) : atoi(argv[2]);

        /* Set new serial port settings via supported ioctl */
# if defined TCSETS2
        rc = ioctl(fd, TCSETS2, &tio);
# else
        rc = ioctl(fd, TCSETS, &tio);
# endif
        if (rc) {
            perror("TCSETS");
            close(fd);
            exit(EXIT_FAILURE);
        }

        /* And get new values which were really configured */
# if defined TCGETS2
        rc = ioctl(fd, TCGETS2, &tio);
# else
        rc = ioctl(fd, TCGETS, &tio);
# endif
        if (rc) {
            perror("TCGETS");
            close(fd);
            exit(EXIT_FAILURE);
        }
    }

    close(fd);

    printf("output baud rate: %u\n", tio.c_ospeed);
    printf("input baud rate: %u\n", tio.c_ispeed);

    exit(EXIT_SUCCESS);
#endif
}
```



## See Also {#see-also}

```
ldattach(8), ioctl(2), ioctl_console(2), termios(3), pty(7)
```


Linux man-pages 6.7                                                                              2024-03-03                                                                                    [ioctl_tty(2)](ioctl_tty.html)
