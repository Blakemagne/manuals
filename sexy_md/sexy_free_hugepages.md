# üìö ALLOC_HUGEPAGES, Manual

> *Beautiful, readable documentation for command-line tools*

---

[alloc_hugepages(2)](alloc_hugepages.html)                                                                          System Calls Manual                                                                          [alloc_hugepages(2)](alloc_hugepages.html)


## üìë Table of Contents

- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Author](#author)
  - [Reporting Bugs](#reporting-bugs)
  - [Copyright](#copyright)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
- [Files](#files)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [History](#history)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Environment](#environment)
- [Files](#files)
- [See Also](#see-also)
- [Authors](#authors)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
  - [Exit Codes](#exit-codes)
- [See Also](#see-also)
- [Examples](#examples)
- [Authors](#authors)
  - [Copyright](#copyright)
  - [Notes](#notes)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
  - [Notes](#notes)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Interactive Commands](#interactive-commands)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
- [Files](#files)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
- [Examples](#examples)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Examples](#examples)
  - [Reporting Bugs](#reporting-bugs)
  - [Copyright](#copyright)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
  - [Caveats](#caveats)
- [Files](#files)
  - [Exit Values](#exit-values)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
  - [Compatibility](#compatibility)
  - [Bugs](#bugs)
- [See Also](#see-also)
  - [Reporting Bugs](#reporting-bugs)
  - [Availability](#availability)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Attributes](#attributes)
  - [Versions](#versions)
  - [Standards](#standards)
  - [History](#history)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
  - [Caveats](#caveats)
  - [Configuration](#configuration)
- [Files](#files)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Author](#author)
  - [Reporting Bugs](#reporting-bugs)
  - [Copyright](#copyright)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Versions](#versions)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
- [Examples](#examples)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Files](#files)
- [Examples](#examples)
- [See Also](#see-also)
- [Authors](#authors)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Attributes](#attributes)
  - [Versions](#versions)
  - [Versions](#versions)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
  - [Bugs](#bugs)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Default Key Bindings](#default-key-bindings)
  - [Command Parsing And Execution](#command-parsing-and-execution)
  - [Parsing Syntax](#parsing-syntax)
  - [Commands](#commands)
  - [Clients And Sessions](#clients-and-sessions)
  - [Windows And Panes](#windows-and-panes)
  - [Key Bindings](#key-bindings)
- [Options](#options)
  - [Hooks](#hooks)
  - [Mouse Support](#mouse-support)
  - [Formats](#formats)
  - [Styles](#styles)
  - [Names And Titles](#names-and-titles)
  - [Global And Session Environment](#global-and-session-environment)
  - [Status Line](#status-line)
  - [Buffers](#buffers)
  - [Miscellaneous](#miscellaneous)
  - [Exit Messages](#exit-messages)
  - [Terminfo Extensions](#terminfo-extensions)
  - [Control Mode](#control-mode)
- [Environment](#environment)
- [Files](#files)
- [Examples](#examples)
- [See Also](#see-also)
- [Authors](#authors)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
  - [Commands](#commands)
  - [Display Names](#display-names)
  - [Example](#example)
- [Environment](#environment)
- [Files](#files)
- [See Also](#see-also)
  - [Bugs](#bugs)
  - [Author](#author)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
- [Files](#files)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)


## Name {#name}

```
alloc_hugepages, free_hugepages - allocate or free huge pages
```



## Synopsis {#synopsis}

```
void *syscall(SYS_alloc_hugepages, int key, void addr[.len], size_t len,
              int prot, int flag);
int syscall(SYS_free_hugepages, void *addr);

Note: glibc provides no wrappers for these system calls, necessitating the use of syscall(2).
```



## Description {#description}

```
The  system  calls  alloc_hugepages()  and  free_hugepages()  were  introduced  in  Linux  2.5.36  and  removed  again  in  Linux  2.5.54.  They existed only on i386 and ia64 (when built with CON‚Äê
FIG_HUGETLB_PAGE).  In Linux 2.4.20, the syscall numbers exist, but the calls fail with the error ENOSYS.

On i386 the memory management hardware knows about ordinary pages (4 KiB) and huge pages (2 or 4 MiB).  Similarly ia64 knows about huge pages of several sizes.  These system  calls  serve  to  map
huge pages into the process's memory or to free them again.  Huge pages are locked into memory, and are not swapped.

The key argument is an identifier.  When zero the pages are private, and not inherited by children.  When positive the pages are shared with other applications using the same key, and inherited by
child processes.

The  addr  argument  of  free_hugepages() tells which page is being freed: it was the return value of a call to alloc_hugepages().  (The memory is first actually freed when all users have released
it.)  The addr argument of alloc_hugepages() is a hint, that the kernel may or may not follow.  Addresses must be properly aligned.

The len argument is the length of the required segment.  It must be a multiple of the huge page size.

The prot argument specifies the memory protection of the segment.  It is one of PROT_READ, PROT_WRITE, PROT_EXEC.

The flag argument is ignored, unless key is positive.  In that case, if flag is IPC_CREAT, then a new huge page segment is created when none with the given key existed.  If this flag is  not  set,
then ENOENT is returned when no segment with the given key exists.
```



### Return Value {#return-value}

```
On success, alloc_hugepages() returns the allocated virtual address, and free_hugepages() returns zero.  On error, -1 is returned, and errno is set to indicate the error.
```



### Errors {#errors}

```
ENOSYS The system call is not supported on this kernel.
```



### Files {#files}

```
/proc/sys/vm/nr_hugepages
       Number of configured hugetlb pages.  This can be read and written.

/proc/meminfo
       Gives info on the number of configured hugetlb pages and on their size in the three variables HugePages_Total, HugePages_Free, Hugepagesize.
```



### Standards {#standards}

```
Linux on Intel processors.
```



### History {#history}

```
These system calls are gone; they existed only in Linux 2.5.36 through to Linux 2.5.54.
```



### Notes {#notes}

```
Now the hugetlbfs filesystem can be used instead.  Memory backed by huge pages (if the CPU supports them) is obtained by using mmap(2) to map files in this virtual filesystem.

The maximal number of huge pages can be specified using the hugepages= boot parameter.
```


Linux man-pages 6.7                                                                              2023-10-31                                                                              [alloc_hugepages(2)](alloc_hugepages.html)
