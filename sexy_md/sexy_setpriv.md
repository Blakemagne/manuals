# ðŸ“š SETPRIV Manual

> *Beautiful, readable documentation for command-line tools*

---

[SETPRIV(1)](SETPRIV.html)                                                                                     User Commands                                                                                     [SETPRIV(1)](SETPRIV.html)


## ðŸ“‘ Table of Contents

- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Standards](#standards)
  - [History](#history)
- [Examples](#examples)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
  - [Bugs](#bugs)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Versions](#versions)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
  - [Bugs](#bugs)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Bugs](#bugs)
  - [Author](#author)
  - [Reporting Bugs](#reporting-bugs)
  - [Copyright](#copyright)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
  - [Notes](#notes)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
  - [Posix.1-2001.](#posix.1-2001.)
  - [Notes](#notes)
  - [Bugs](#bugs)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Author](#author)
  - [Reporting Bugs](#reporting-bugs)
  - [Copyright](#copyright)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Author](#author)
  - [Reporting Bugs](#reporting-bugs)
  - [Copyright](#copyright)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
- [Authors](#authors)
- [See Also](#see-also)
  - [Reporting Bugs](#reporting-bugs)
  - [Availability](#availability)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Author](#author)
  - [Reporting Bugs](#reporting-bugs)
  - [Copyright](#copyright)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
  - [Notes](#notes)
  - [Bugs](#bugs)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
  - [Bugs](#bugs)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
- [Files](#files)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [History](#history)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
  - [Bugs](#bugs)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
  - [Target](#target)
- [Description](#description)
- [Options](#options)
- [See Also](#see-also)
  - [Copyright](#copyright)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Author](#author)
  - [Reporting Bugs](#reporting-bugs)
  - [Copyright](#copyright)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Environment](#environment)
- [Files](#files)
- [See Also](#see-also)
- [Authors](#authors)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Exit Status](#exit-status)
- [Environment](#environment)
- [Files](#files)
- [See Also](#see-also)
  - [History](#history)
  - [Bugs](#bugs)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [C11, Posix.1-2008.](#c11,-posix.1-2008.)
  - [History](#history)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Seccomp_Ret_Errno](#seccomp_ret_errno)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
- [Examples](#examples)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
  - [Posix.1-2001.](#posix.1-2001.)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Versions](#versions)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
  - [Notes](#notes)
  - [Bugs](#bugs)
- [Examples](#examples)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Arguments](#arguments)
- [Options](#options)
- [See Also](#see-also)
  - [Url](#url)
- [Authors](#authors)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Standards](#standards)
  - [Notes](#notes)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
  - [Exit Status](#exit-status)
- [Environment](#environment)
- [Files](#files)
  - [Notes](#notes)
  - [Nfs](#nfs)
  - [History](#history)
- [See Also](#see-also)
  - [Reporting Bugs](#reporting-bugs)
  - [Availability](#availability)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Versions](#versions)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
  - [Bugs](#bugs)
- [Examples](#examples)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
  - [Exit Codes](#exit-codes)
- [See Also](#see-also)
- [Examples](#examples)
- [Authors](#authors)
  - [Copyright](#copyright)
  - [Notes](#notes)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Exit Codes](#exit-codes)
- [Files](#files)
- [Environment](#environment)
  - [Lang, Language, Lc_Ctype, Lc_Numeric, Lc_Time, Lc_Collate, Lc_Monetary, Lc_Messages, Lc_Paper, Lc_Name, Lc_Address, Lc_Telephone, Lc_Measurement, Lc_Identification, Lc_All, Term, Path](#lang,-language,-lc_ctype,-lc_numeric,-lc_time,-lc_collate,-lc_monetary,-lc_messages,-lc_paper,-lc_name,-lc_address,-lc_telephone,-lc_measurement,-lc_identification,-lc_all,-term,-path)
- [See Also](#see-also)
  - [Author](#author)
  - [Copyright](#copyright)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Versions](#versions)
  - [Bugs](#bugs)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Attributes](#attributes)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
  - [Notes](#notes)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Versions](#versions)
  - [Standards](#standards)
  - [Posix.1-2008.](#posix.1-2008.)
  - [History](#history)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
  - [Parsing](#parsing)
  - [Output](#output)
  - [Quoting](#quoting)
  - [Scanning Modes](#scanning-modes)
  - [Compatibility](#compatibility)
  - [Return Codes](#return-codes)
- [Examples](#examples)
- [Environment](#environment)
  - [Posixly_Correct](#posixly_correct)
  - [Getopt_Compatible](#getopt_compatible)
  - [Bugs](#bugs)
  - [Author](#author)
- [See Also](#see-also)
  - [Reporting Bugs](#reporting-bugs)
  - [Availability](#availability)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Versions](#versions)
  - [Standards](#standards)
  - [History](#history)
- [See Also](#see-also)
- [Name](#name)
  - [Library](#library)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Return Value](#return-value)
  - [Errors](#errors)
  - [Standards](#standards)
  - [History](#history)
  - [Notes](#notes)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
  - [Interactive Commands](#interactive-commands)
- [See Also](#see-also)
- [Name](#name)
- [Synopsis](#synopsis)
- [Description](#description)
- [Options](#options)
  - [Notes](#notes)
- [Examples](#examples)
- [Authors](#authors)
- [See Also](#see-also)
  - [Reporting Bugs](#reporting-bugs)
  - [Availability](#availability)


## Name {#name}

```
setpriv - run a program with different Linux privilege settings
```



## Synopsis {#synopsis}

```
setpriv [options] program [arguments]
```



## Description {#description}

```
Sets or queries various Linux privilege settings that are inherited across execve(2).

In comparison to su(1) and runuser(1), setpriv neither uses PAM, nor does it prompt for a password. It is a simple, non-set-user-ID wrapper around execve(2), and can be used to drop privileges in
the same way as setuidgid(8) from daemontools, chpst(8) from runit, or similar tools shipped by other service managers.
```



## Options {#options}

       **`--clear-groups`**
           Clear supplementary groups.

       **`-d`**, --dump
           Dump the current privilege state. This option can be specified more than once to show extra, mostly useless, information. Incompatible with all other options.

       **`--groups group`**...
           Set supplementary groups. The argument is a comma-separated list of GIDs or names.

       **`--inh-caps`** (+|-)cap..., --ambient-caps (+|-)cap..., --bounding-set (+|-)cap...
           Set the inheritable capabilities, ambient capabilities or the capability bounding set. See capabilities(7). The argument is a comma-separated list of +cap and -cap entries, which add or remove
           an entry respectively. cap can either be a human-readable name as seen in capabilities(7) without the cap_ prefix or of the format cap_N, where N is the internal capability index used by
           Linux. +all and -all can be used to add or remove all caps.

           The set of capabilities starts out as the current inheritable set for --inh-caps, the current ambient set for --ambient-caps and the current bounding set for --bounding-set.

           Note the following restrictions (detailed in capabilities(7)) regarding modifications to these capability sets:

           â€¢   A capability can be added to the inheritable set only if it is currently present in the bounding set.

           â€¢   A capability can be added to the ambient set only if it is currently present in both the permitted and inheritable sets.

           â€¢   Notwithstanding the syntax offered by setpriv, the kernel does not permit capabilities to be added to the bounding set.

```
If you drop a capability from the bounding set without also dropping it from the inheritable set, you are likely to become confused. Do not do that.
```


       **`--keep-groups`**
           Preserve supplementary groups. Only useful in conjunction with --rgid, --egid, or --regid.

       **`--init-groups`**
           Initialize supplementary groups using initgroups3. Only useful in conjunction with --ruid or --reuid.

       **`--list-caps`**
           List all known capabilities. This option must be specified alone.

       **`--no-new-privs`**
           Set the no_new_privs bit. With this bit set, execve(2) will not grant new privileges. For example, the set-user-ID and set-group-ID bits as well as file capabilities will be disabled.
           (Executing binaries with these bits set will still work, but they will not gain privileges. Certain LSMs, especially AppArmor, may result in failures to execute certain programs.) This bit is
           inherited by child processes and cannot be unset. See prctl(2) and Documentation/prctl/no_new_privs.txt in the Linux kernel source.

           The no_new_privs bit is supported since Linux 3.5.

       **`--rgid gid`**, --egid gid, --regid gid
           Set the real, effective, or both GIDs. The gid argument can be given as a textual group name.

           For safety, you must specify one of --clear-groups, --groups, --keep-groups, or --init-groups if you set any primary gid.

       **`--ruid uid`**, --euid uid, --reuid uid
           Set the real, effective, or both UIDs. The uid argument can be given as a textual login name.

           Setting a uid or gid does not change capabilities, although the exec call at the end might change capabilities. This means that, if you are root, you probably want to do something like:

           setpriv --reuid=1000 --regid=1000 --inh-caps=-all

       **`--securebits`** (+|-)securebit...
           Set or clear securebits. The argument is a comma-separated list. The valid securebits are noroot, noroot_locked, no_setuid_fixup, no_setuid_fixup_locked, and keep_caps_locked. keep_caps is
           cleared by execve(2) and is therefore not allowed.

       **`--pdeathsig keep`**|clear|<signal>
           Keep, clear or set the parent death signal. Some LSMs, most notably SELinux and AppArmor, clear the signal when the process' credentials change. Using --pdeathsig keep will restore the parent
           death signal after changing credentials to remedy that situation.

       **`--selinux-label label`**
           Request a particular SELinux transition (using a transition on exec, not dyntrans). This will fail and cause setpriv to abort if SELinux is not in use, and the transition may be ignored or
           cause execve(2) to fail at SELinuxâ€™s whim. (In particular, this is unlikely to work in conjunction with no_new_privs.) This is similar to runcon(1).

       **`--apparmor-profile profile`**
           Request a particular AppArmor profile (using a transition on exec). This will fail and cause setpriv to abort if AppArmor is not in use, and the transition may be ignored or cause execve(2) to
           fail at AppArmorâ€™s whim.

       **`--reset-env`**
           Clears all the environment variables except TERM; initializes the environment variables HOME, SHELL, USER, LOGNAME according to the userâ€™s passwd entry; sets PATH to
           /usr/local/bin:/bin:/usr/bin for a regular user and to /usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin for root.

           The environment variable PATH may be different on systems where /bin and /sbin are merged into /usr. The environment variable SHELL defaults to /bin/sh if none is given in the userâ€™s passwd
           entry.

       **`-h`**, --help
           Display help text and exit.

       **`-V`**, --version
           Print version and exit.


### Notes {#notes}

```
If applying any specified option fails, program will not be run and setpriv will return with exit status 127.

Be careful with this tool â€” it may have unexpected security consequences. For example, setting no_new_privs and then execing a program that is SELinux-confined (as this tool would do) may prevent
the SELinux restrictions from taking effect.
```



## Examples {#examples}

```
If youâ€™re looking for behavior similar to su(1)/runuser(1), or sudo(8) (without the -g option), try something like:

setpriv --reuid=1000 --regid=1000 --init-groups

If you want to mimic daemontools' setuid(8), try:

setpriv --reuid=1000 --regid=1000 --clear-groups
```



### Authors {#authors}

```
Andy Lutomirski <luto@amacapital.net>
```



## See Also {#see-also}

```
runuser(1), su(1), prctl(2), capabilities(7)
```



### Reporting Bugs {#reporting-bugs}

```
For bug reports, use the issue tracker at https://github.com/util-linux/util-linux/issues.
```



### Availability {#availability}

```
The setpriv command is part of the util-linux package which can be downloaded from Linux Kernel Archive <https://www.kernel.org/pub/linux/utils/util-linux/>.
```


util-linux 2.39.3                                                                                2023-10-23                                                                                      [SETPRIV(1)](SETPRIV.html)
