<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> üìö READV, Manual </title>
    <link href="./index.css" rel="stylesheet">
</head>

<body>
    <header class="nav-header">
        <a href="./index.html" class="home-button">üè† Home</a>
    </header>
    <article>
        <div><h1>üìö READV, Manual</h1><blockquote>*Beautiful, readable documentation for command-line tools*</blockquote><hr></hr><p>[<a href="./readv.html">readv(2)</a>](readv.html)                      System Calls Manual                     [<a href="./readv.html">readv(2)</a>](readv.html)</p><h2>üìë Table of Contents</h2><p>- <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a> - <a href="#examples">Examples</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#versions">Versions</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#bugs">Bugs</a>   - <a href="#author">Author</a>   - <a href="#reporting-bugs">Reporting Bugs</a>   - <a href="#copyright">Copyright</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#attributes">Attributes</a>   - <a href="#standards">Standards</a>   - <a href="#posix.1-2008.">Posix.1-2008.</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#posix.1-2008.">Posix.1-2008.</a>   - <a href="#history">History</a>   - <a href="#posix.1-2001.">Posix.1-2001.</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#author">Author</a>   - <a href="#reporting-bugs">Reporting Bugs</a>   - <a href="#copyright">Copyright</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#author">Author</a>   - <a href="#reporting-bugs">Reporting Bugs</a>   - <a href="#copyright">Copyright</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a> - <a href="#options">Options</a> - <a href="#authors">Authors</a> - <a href="#see-also">See Also</a>   - <a href="#reporting-bugs">Reporting Bugs</a>   - <a href="#availability">Availability</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#versions">Versions</a>   - <a href="#standards">Standards</a>   - <a href="#posix.1-2008.">Posix.1-2008.</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a> - <a href="#files">Files</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#author">Author</a>   - <a href="#reporting-bugs">Reporting Bugs</a>   - <a href="#copyright">Copyright</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#configuration">Configuration</a> - <a href="#files">Files</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#posix.1-2008.">Posix.1-2008.</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a> - <a href="#files">Files</a>   - <a href="#attributes">Attributes</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#attributes">Attributes</a>   - <a href="#standards">Standards</a>   - <a href="#c11,-posix.1-2008.">C11, Posix.1-2008.</a>   - <a href="#history">History</a>   - <a href="#posix.1-2001,-c99.">Posix.1-2001, C99.</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a>   - <a href="#target">Target</a> - <a href="#description">Description</a> - <a href="#options">Options</a> - <a href="#see-also">See Also</a>   - <a href="#copyright">Copyright</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#author">Author</a>   - <a href="#reporting-bugs">Reporting Bugs</a>   - <a href="#copyright">Copyright</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a> - <a href="#environment">Environment</a> - <a href="#files">Files</a> - <a href="#see-also">See Also</a> - <a href="#authors">Authors</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#exit-status">Exit Status</a> - <a href="#environment">Environment</a> - <a href="#files">Files</a> - <a href="#see-also">See Also</a>   - <a href="#history">History</a>   - <a href="#bugs">Bugs</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#attributes">Attributes</a>   - <a href="#standards">Standards</a>   - <a href="#c11,-posix.1-2008.">C11, Posix.1-2008.</a>   - <a href="#history">History</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#seccomp_ret_errno">Seccomp_Ret_Errno</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a> - <a href="#examples">Examples</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a> - <a href="#options">Options</a>   - <a href="#keys">Keys</a>   - <a href="#exit-status">Exit Status</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#posix.1-2008.">Posix.1-2008.</a>   - <a href="#history">History</a>   - <a href="#posix.1-2001.">Posix.1-2001.</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#versions">Versions</a>   - <a href="#standards">Standards</a>   - <a href="#posix.1-2008.">Posix.1-2008.</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#examples">Examples</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#arguments">Arguments</a> - <a href="#options">Options</a> - <a href="#see-also">See Also</a>   - <a href="#url">Url</a> - <a href="#authors">Authors</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#versions">Versions</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#examples">Examples</a> - <a href="#see-also">See Also</a></p><h2 id="name">Name</h2><pre><code>readv,  writev, preadv, pwritev, preadv2, pwritev2 - read or write data
into multiple buffers
</code></pre><h3 id="library">Library</h3><pre><code>Standard C library (libc, -lc)
</code></pre><h2 id="synopsis">Synopsis</h2><p>` #include <sys/uio.h></p><p>ssize_t readv(int fd, const struct iovec *iov, int iovcnt); ssize_t writev(int fd, const struct iovec *iov, int iovcnt);</p><p>ssize_t preadv(int fd, const struct iovec *iov, int iovcnt,                 off_t offset); ssize_t pwritev(int fd, const struct iovec *iov, int iovcnt,                 off_t offset);</p><p>ssize_t preadv2(int fd, const struct iovec *iov, int iovcnt,                 off_t offset, int flags); ssize_t pwritev2(int fd, const struct iovec *iov, int iovcnt,                 off_t offset, int flags); `</p><p>Feature Test Macro Requirements for glibc (see [<a href="./feature_test_macros.html">feature_test_macros(7)</a>](feature_test_macros.html)):</p><pre><code>preadv(), pwritev():
    Since glibc 2.19:
        _DEFAULT_SOURCE
    glibc 2.19 and earlier:
        _BSD_SOURCE
</code></pre><h2 id="description">Description</h2><p>` The readv() system call reads iovcnt buffers from the  file  associated with the file descriptor fd into the buffers described by iov ("scatter input").</p><p>The writev() system call writes iovcnt buffers of data described by iov to the file associated with the file descriptor fd ("gather output").</p><p>The  pointer  iov  points to an array of iovec structures, described in <a href="./iovec.html">iovec(3type)</a>.</p><p>The readv() system call works just like <a href="./read.html">read(2)</a>  except  that  multiple buffers are filled.</p><p>The  writev() system call works just like <a href="./write.html">write(2)</a> except that multiple buffers are written out.</p><p>Buffers are processed in array order.  This  means  that  readv()  com‚Äê pletely fills iov[0] before proceeding to iov[1], and so on.  (If there is  insufficient  data,  then  not all buffers pointed to by iov may be filled.)  Similarly, writev() writes out the entire contents of  iov[0] before proceeding to iov[1], and so on.</p><p>The  data  transfers  performed by readv() and writev() are atomic: the data written by writev() is written as a single block that is  not  in‚Äê termingled  with  output  from  writes in other processes; analogously, readv() is guaranteed to read a contiguous block of data from the file, regardless of read operations performed in other threads  or  processes that  have file descriptors referring to the same open file description (see <a href="./open.html">open(2)</a>). `</p><p>preadv() and pwritev() ` The preadv() system call combines  the  functionality  of  readv()  and <a href="./pread.html">pread(2)</a>.   It performs the same task as readv(), but adds a fourth ar‚Äê gument, offset, which specifies the file offset at which the input  op‚Äê eration is to be performed.</p><p>The  pwritev()  system  call combines the functionality of writev() and <a href="./pwrite.html">pwrite(2)</a>.  It performs the same task as writev(), but  adds  a  fourth argument,  offset,  which specifies the file offset at which the output operation is to be performed.</p><p>The file offset is not changed by these system  calls.   The  file  re‚Äê ferred to by fd must be capable of seeking. `</p><p>preadv2() and pwritev2() ` These system calls are similar to preadv() and pwritev() calls, but add a  fifth argument, flags, which modifies the behavior on a per-call ba‚Äê sis.</p><p>Unlike preadv() and pwritev(), if the offset argument is -1,  then  the current file offset is used and updated.</p><p>The flags argument contains a bitwise OR of zero or more of the follow‚Äê ing flags:</p><p>RWF_DSYNC (since Linux 4.7)        Provide  a  per-write  equivalent  of  the O_DSYNC <a href="./open.html">open(2)</a> flag.        This flag is meaningful only for pwritev2(), and its effect  ap‚Äê        plies only to the data range written by the system call.</p><p>RWF_HIPRI (since Linux 4.6)        High priority read/write.  Allows block-based filesystems to use        polling of the device, which provides lower latency, but may use        additional  resources.   (Currently, this feature is usable only        on a file descriptor opened using the O_DIRECT flag.)</p><p>RWF_SYNC (since Linux 4.7)        Provide a per-write equivalent of the O_SYNC <a href="./open.html">open(2)</a> flag.  This        flag is meaningful only for pwritev2(), and its  effect  applies        only to the data range written by the system call.</p><p>RWF_NOWAIT (since Linux 4.14)        Do  not  wait  for  data which is not immediately available.  If        this flag is specified, the preadv2() system  call  will  return        instantly if it would have to read data from the backing storage        or wait for a lock.  If some data was successfully read, it will        return the number of bytes read.  If no bytes were read, it will        return  -1  and  set errno to EAGAIN (but see BUGS).  Currently,        this flag is meaningful only for preadv2().</p><p>RWF_APPEND (since Linux 4.16)        Provide a per-write equivalent of  the  O_APPEND  <a href="./open.html">open(2)</a>  flag.        This  flag is meaningful only for pwritev2(), and its effect ap‚Äê        plies only to the data range written by the  system  call.   The        offset argument does not affect the write operation; the data is        always  appended to the end of the file.  However, if the offset        argument is -1, the current file offset is updated. `</p><h3 id="return-value">Return Value</h3><p>` On success, readv(), preadv(), and preadv2() return the number of bytes read; writev(), pwritev(), and pwritev2() return the  number  of  bytes written.</p><p>Note  that  it  is not an error for a successful call to transfer fewer bytes than requested (see <a href="./read.html">read(2)</a> and <a href="./write.html">write(2)</a>).</p><p>On error, -1 is returned, and errno is set to indicate the error. `</p><h3 id="errors">Errors</h3><p>` The errors  are  as  given  for  <a href="./read.html">read(2)</a>  and  <a href="./write.html">write(2)</a>.   Furthermore, preadv(),  preadv2(),  pwritev(),  and pwritev2() can also fail for the same reasons as <a href="./lseek.html">lseek(2)</a>.  Additionally, the following errors  are  de‚Äê fined:</p><p>EINVAL The sum of the iov_len values overflows an ssize_t value.</p><p>EINVAL The  vector count, iovcnt, is less than zero or greater than the        permitted maximum.</p><p>EOPNOTSUPP        An unknown flag is specified in flags. `</p><h3 id="versions">Versions</h3><p>C library/kernel differences ` The raw preadv() and pwritev() system calls have call  signatures  that differ  slightly  from  that of the corresponding GNU C library wrapper functions shown in the SYNOPSIS.  The final argument,  offset,  is  un‚Äê packed by the wrapper functions into two arguments in the system calls:</p><p>unsigned long pos_l, unsigned long pos</p><p>These  arguments contain, respectively, the low order and high order 32 bits of offset. `</p><h3 id="standards">Standards</h3><p>` readv() writev()        POSIX.1-2008.</p><p>preadv() pwritev()        BSD.</p><p>preadv2() pwritev2()        Linux. `</p><h3 id="history">History</h3><p>` readv() writev()        POSIX.1-2001, 4.4BSD (first appeared in 4.2BSD).</p><p>preadv(), pwritev(): Linux 2.6.30, glibc 2.10.</p><p>preadv2(), pwritev2(): Linux 4.6, glibc 2.26. `</p><p>Historical C library/kernel differences ` To deal with the fact that IOV_MAX was so  low  on  early  versions  of Linux,  the  glibc  wrapper functions for readv() and writev() did some extra work if they detected that  the  underlying  kernel  system  call failed  because  this  limit was exceeded.  In the case of readv(), the wrapper function allocated a temporary buffer large enough for  all  of the  items  specified  by iov, passed that buffer in a call to <a href="./read.html">read(2)</a>, copied data from the buffer to the locations specified by the  iov_base fields  of the elements of iov, and then freed the buffer.  The wrapper function for writev() performed the analogous task  using  a  temporary buffer and a call to <a href="./write.html">write(2)</a>.</p><p>The need for this extra effort in the glibc wrapper functions went away with Linux 2.2 and later.  However, glibc continued to provide this be‚Äê havior  until  glibc  2.10.  Starting with glibc 2.9, the wrapper func‚Äê tions provide this behavior only if the library detects that the system is running a Linux kernel older than Linux 2.6.18 (an  arbitrarily  se‚Äê lected kernel version).  And since glibc 2.20 (which requires a minimum of  Linux 2.6.32), the glibc wrapper functions always just directly in‚Äê voke the system calls. `</p><h3 id="notes">Notes</h3><pre><code>POSIX.1 allows an implementation to place a  limit  on  the  number  of
items  that  can be passed in iov.  An implementation can advertise its
limit by defining IOV_MAX in <limits.h> or at run time via  the  return
value from sysconf(_SC_IOV_MAX).  On modern Linux systems, the limit is
1024.  Back in Linux 2.0 days, this limit was 16.
</code></pre><h3 id="bugs">Bugs</h3><pre><code>Linux 5.9 and Linux 5.10 have a bug where preadv2() with the RWF_NOWAIT
flag may return 0 even when not at end of file.
</code></pre><h2 id="examples">Examples</h2><p>` The following code sample demonstrates the use of writev():</p><p>char          *str0 = "hello ";     char          *str1 = "world\n";     ssize_t       nwritten;     struct iovec  iov[2];</p><p>iov[0].iov_base = str0;     iov[0].iov_len = strlen(str0);     iov[1].iov_base = str1;     iov[1].iov_len = strlen(str1);</p><p>nwritten = writev(STDOUT_FILENO, iov, 2); `</p><h2 id="see-also">See Also</h2><pre><code>pread(2), read(2), write(2)
</code></pre><p>Linux man-pages 6.7               2023-10-31                          [<a href="./readv.html">readv(2)</a>](readv.html)</p></div>
    </article>
</body>

</html>
