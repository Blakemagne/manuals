<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> üìö POLL, Manual </title>
    <link href="./index.css" rel="stylesheet">
</head>

<body>
    <header class="nav-header">
        <a href="./index.html" class="home-button">üè† Home</a>
    </header>
    <article>
        <div><h1>üìö POLL, Manual</h1><blockquote>*Beautiful, readable documentation for command-line tools*</blockquote><hr></hr><p>[<a href="./poll.html">poll(2)</a>](poll.html)                                                                                     System Calls Manual                                                                                     [<a href="./poll.html">poll(2)</a>](poll.html)</p><h2>üìë Table of Contents</h2><p>- <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a> - <a href="#examples">Examples</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#versions">Versions</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#bugs">Bugs</a>   - <a href="#author">Author</a>   - <a href="#reporting-bugs">Reporting Bugs</a>   - <a href="#copyright">Copyright</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#attributes">Attributes</a>   - <a href="#standards">Standards</a>   - <a href="#posix.1-2008.">Posix.1-2008.</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#posix.1-2008.">Posix.1-2008.</a>   - <a href="#history">History</a>   - <a href="#posix.1-2001.">Posix.1-2001.</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#author">Author</a>   - <a href="#reporting-bugs">Reporting Bugs</a>   - <a href="#copyright">Copyright</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#author">Author</a>   - <a href="#reporting-bugs">Reporting Bugs</a>   - <a href="#copyright">Copyright</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a> - <a href="#options">Options</a> - <a href="#authors">Authors</a> - <a href="#see-also">See Also</a>   - <a href="#reporting-bugs">Reporting Bugs</a>   - <a href="#availability">Availability</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#versions">Versions</a>   - <a href="#standards">Standards</a>   - <a href="#posix.1-2008.">Posix.1-2008.</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a> - <a href="#files">Files</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#author">Author</a>   - <a href="#reporting-bugs">Reporting Bugs</a>   - <a href="#copyright">Copyright</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#configuration">Configuration</a> - <a href="#files">Files</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#posix.1-2008.">Posix.1-2008.</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a> - <a href="#files">Files</a>   - <a href="#attributes">Attributes</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#attributes">Attributes</a>   - <a href="#standards">Standards</a>   - <a href="#c11,-posix.1-2008.">C11, Posix.1-2008.</a>   - <a href="#history">History</a>   - <a href="#posix.1-2001,-c99.">Posix.1-2001, C99.</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a>   - <a href="#target">Target</a> - <a href="#description">Description</a> - <a href="#options">Options</a> - <a href="#see-also">See Also</a>   - <a href="#copyright">Copyright</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#author">Author</a>   - <a href="#reporting-bugs">Reporting Bugs</a>   - <a href="#copyright">Copyright</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a> - <a href="#environment">Environment</a> - <a href="#files">Files</a> - <a href="#see-also">See Also</a> - <a href="#authors">Authors</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#exit-status">Exit Status</a> - <a href="#environment">Environment</a> - <a href="#files">Files</a> - <a href="#see-also">See Also</a>   - <a href="#history">History</a>   - <a href="#bugs">Bugs</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#attributes">Attributes</a>   - <a href="#standards">Standards</a>   - <a href="#c11,-posix.1-2008.">C11, Posix.1-2008.</a>   - <a href="#history">History</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#seccomp_ret_errno">Seccomp_Ret_Errno</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a> - <a href="#examples">Examples</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a> - <a href="#options">Options</a>   - <a href="#keys">Keys</a>   - <a href="#exit-status">Exit Status</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#posix.1-2008.">Posix.1-2008.</a>   - <a href="#history">History</a>   - <a href="#posix.1-2001.">Posix.1-2001.</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#versions">Versions</a>   - <a href="#standards">Standards</a>   - <a href="#posix.1-2008.">Posix.1-2008.</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#examples">Examples</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#arguments">Arguments</a> - <a href="#options">Options</a> - <a href="#see-also">See Also</a>   - <a href="#url">Url</a> - <a href="#authors">Authors</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#versions">Versions</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#examples">Examples</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#notes">Notes</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a> - <a href="#options">Options</a>   - <a href="#exit-status">Exit Status</a> - <a href="#environment">Environment</a> - <a href="#files">Files</a>   - <a href="#notes">Notes</a>   - <a href="#nfs">Nfs</a>   - <a href="#history">History</a> - <a href="#see-also">See Also</a>   - <a href="#reporting-bugs">Reporting Bugs</a>   - <a href="#availability">Availability</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#versions">Versions</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#examples">Examples</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a> - <a href="#options">Options</a>   - <a href="#exit-codes">Exit Codes</a> - <a href="#see-also">See Also</a> - <a href="#examples">Examples</a> - <a href="#authors">Authors</a>   - <a href="#copyright">Copyright</a>   - <a href="#notes">Notes</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#exit-codes">Exit Codes</a> - <a href="#files">Files</a> - <a href="#environment">Environment</a>   - <a href="#lang,-language,-lc_ctype,-lc_numeric,-lc_time,-lc_collate,-lc_monetary,-lc_messages,-lc_paper,-lc_name,-lc_address,-lc_telephone,-lc_measurement,-lc_identification,-lc_all,-term,-path">Lang, Language, Lc_Ctype, Lc_Numeric, Lc_Time, Lc_Collate, Lc_Monetary, Lc_Messages, Lc_Paper, Lc_Name, Lc_Address, Lc_Telephone, Lc_Measurement, Lc_Identification, Lc_All, Term, Path</a> - <a href="#see-also">See Also</a>   - <a href="#author">Author</a>   - <a href="#copyright">Copyright</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#versions">Versions</a>   - <a href="#bugs">Bugs</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#attributes">Attributes</a>   - <a href="#standards">Standards</a>   - <a href="#posix.1-2008.">Posix.1-2008.</a>   - <a href="#history">History</a>   - <a href="#posix.1-2001.">Posix.1-2001.</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#attributes">Attributes</a>   - <a href="#standards">Standards</a>   - <a href="#posix.1-2008.">Posix.1-2008.</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#versions">Versions</a>   - <a href="#standards">Standards</a>   - <a href="#posix.1-2008.">Posix.1-2008.</a>   - <a href="#history">History</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a> - <a href="#options">Options</a>   - <a href="#parsing">Parsing</a>   - <a href="#output">Output</a>   - <a href="#quoting">Quoting</a>   - <a href="#scanning-modes">Scanning Modes</a>   - <a href="#compatibility">Compatibility</a>   - <a href="#return-codes">Return Codes</a> - <a href="#examples">Examples</a> - <a href="#environment">Environment</a>   - <a href="#posixly_correct">Posixly_Correct</a>   - <a href="#getopt_compatible">Getopt_Compatible</a>   - <a href="#bugs">Bugs</a>   - <a href="#author">Author</a> - <a href="#see-also">See Also</a>   - <a href="#reporting-bugs">Reporting Bugs</a>   - <a href="#availability">Availability</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#attributes">Attributes</a>   - <a href="#standards">Standards</a>   - <a href="#c11,-posix.1-2008.">C11, Posix.1-2008.</a>   - <a href="#history">History</a>   - <a href="#posix.1-2001,-c99.">Posix.1-2001, C99.</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a> - <a href="#options">Options</a>   - <a href="#regular-expressions">Regular Expressions</a>   - <a href="#exit-status">Exit Status</a> - <a href="#environment">Environment</a>   - <a href="#notes">Notes</a>   - <a href="#copyright">Copyright</a>   - <a href="#bugs">Bugs</a>   - <a href="#example">Example</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#description">Description</a>   - <a href="#ascii">Ascii</a>   - <a href="#iso-iec-8859">Iso/Iec 8859</a>   - <a href="#koi8-r---koi8-u">Koi8-R / Koi8-U</a>   - <a href="#gb-2312">Gb 2312</a>   - <a href="#jis-x-0208">Jis X 0208</a>   - <a href="#ks-x-1001">Ks X 1001</a>   - <a href="#tis-620">Tis-620</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#versions">Versions</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#interactive-commands">Interactive Commands</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a> - <a href="#options">Options</a>   - <a href="#notes">Notes</a> - <a href="#examples">Examples</a> - <a href="#authors">Authors</a> - <a href="#see-also">See Also</a>   - <a href="#reporting-bugs">Reporting Bugs</a>   - <a href="#availability">Availability</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a> - <a href="#files">Files</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a> - <a href="#files">Files</a>   - <a href="#attributes">Attributes</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a> - <a href="#examples">Examples</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#examples">Examples</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a> - <a href="#options">Options</a>   - <a href="#configuration">Configuration</a> - <a href="#files">Files</a>   - <a href="#exit-values">Exit Values</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a> - <a href="#examples">Examples</a>   - <a href="#reporting-bugs">Reporting Bugs</a>   - <a href="#copyright">Copyright</a> - <a href="#see-also">See Also</a> - <a href="#name">Name</a>   - <a href="#library">Library</a> - <a href="#synopsis">Synopsis</a> - <a href="#description">Description</a>   - <a href="#pollout">Pollout</a>   - <a href="#return-value">Return Value</a>   - <a href="#errors">Errors</a>   - <a href="#versions">Versions</a>   - <a href="#standards">Standards</a>   - <a href="#history">History</a>   - <a href="#notes">Notes</a>   - <a href="#bugs">Bugs</a> - <a href="#examples">Examples</a> - <a href="#see-also">See Also</a></p><h2 id="name">Name</h2><pre><code>poll, ppoll - wait for some event on a file descriptor
</code></pre><h3 id="library">Library</h3><pre><code>Standard C library (libc, -lc)
</code></pre><h2 id="synopsis">Synopsis</h2><p>` #include <poll.h></p><p>int poll(struct pollfd *fds, nfds_t nfds, int timeout);</p><p>#define _GNU_SOURCE         /* See <a href="./feature_test_macros.html">feature_test_macros(7)</a> */ #include <poll.h></p><p>int ppoll(struct pollfd *fds, nfds_t nfds,           const struct timespec *_Nullable tmo_p,           const sigset_t *_Nullable sigmask); `</p><h2 id="description">Description</h2><p>` poll() performs a similar task to <a href="./select.html">select(2)</a>: it waits for one of a set of file descriptors to become ready to perform I/O.  The Linux-specific <a href="./epoll.html">epoll(7)</a> API performs a similar task, but offers fea‚Äê tures beyond those found in poll().</p><p>The set of file descriptors to be monitored is specified in the fds argument, which is an array of structures of the following form:</p><p>struct pollfd {         int   fd;         /* file descriptor */         short events;     /* requested events */         short revents;    /* returned events */     };</p><p>The caller should specify the number of items in the fds array in nfds.</p><p>The field fd contains a file descriptor for an open file.  If this field is negative, then the corresponding events field is ignored and the revents field returns zero.  (This provides an easy way of ignoring a file descriptor for a single poll() call: simply set the fd field to its bitwise complement.)</p><p>The  field  events is an input parameter, a bit mask specifying the events the application is interested in for the file descriptor fd.  This field may be specified as zero, in which case the only events that can be returned in revents are POLLHUP, POLLERR, and POLLNVAL (see below).</p><p>The field revents is an output parameter, filled by the kernel with the events that actually occurred.  The bits returned in revents can include any of those specified in events,  or  one  of  the values POLLERR, POLLHUP, or POLLNVAL.  (These three bits are meaningless in the events field, and will be set in the revents field whenever the corresponding condition is true.)</p><p>If none of the events requested (and no error) has occurred for any of the file descriptors, then poll() blocks until one of the events occurs.</p><p>The timeout argument specifies the number of milliseconds that poll() should block waiting for a file descriptor to become ready.  The call will block until either: `</p><p>‚Ä¢  a file descriptor becomes ready;</p><p>‚Ä¢  the call is interrupted by a signal handler; or</p><p>‚Ä¢  the timeout expires.</p><p>` Being "ready" means that the requested operation will not block; thus, poll()ing regular files, block devices, and other files with no reasonable polling semantic always returns instantly as ready to read and write.</p><p>Note  that  the timeout interval will be rounded up to the system clock granularity, and kernel scheduling delays mean that the blocking interval may overrun by a small amount.  Specifying a nega‚Äê tive value in timeout means an infinite timeout.  Specifying a timeout of zero causes poll() to return immediately, even if no file descriptors are ready.</p><p>The bits that may be set/returned in events and revents are defined in <poll.h>:</p><p>POLLIN There is data to read.</p><p>POLLPRI        There is some exceptional condition on the file descriptor.  Possibilities include: `</p><p>‚Ä¢  There is out-of-band data on a TCP socket (see <a href="./tcp.html">tcp(7)</a>).</p><p>‚Ä¢  A pseudoterminal master in packet mode has seen a state change on the slave (see <a href="./ioctl_tty.html">ioctl_tty(2)</a>).</p><p>‚Ä¢  A cgroup.events file has been modified (see <a href="./cgroups.html">cgroups(7)</a>).</p><h3 id="pollout">Pollout</h3><p>` Writing is now possible, though a write larger than the available space in a socket or pipe will still block (unless O_NONBLOCK is set).</p><p>`</p><p>` POLLRDHUP (since Linux 2.6.17)        Stream socket peer closed connection, or shut down writing half of connection.  The _GNU_SOURCE feature test macro must be defined (before including any header files)  in  order  to  obtain        this definition.</p><p>POLLERR        Error condition (only returned in revents; ignored in events).  This bit is also set for a file descriptor referring to the write end of a pipe when the read end has been closed.</p><p>POLLHUP        Hang  up (only returned in revents; ignored in events).  Note that when reading from a channel such as a pipe or a stream socket, this event merely indicates that the peer closed its end of        the channel.  Subsequent reads from the channel will return 0 (end of file) only after all outstanding data in the channel has been consumed.</p><p>POLLNVAL        Invalid request: fd not open (only returned in revents; ignored in events).</p><p>When compiling with _XOPEN_SOURCE defined, one also has the following, which convey no further information beyond the bits listed above:</p><p>POLLRDNORM        Equivalent to POLLIN.</p><p>POLLRDBAND        Priority band data can be read (generally unused on Linux).</p><p>POLLWRNORM        Equivalent to POLLOUT.</p><p>POLLWRBAND        Priority data may be written.</p><p>Linux also knows about, but does not use POLLMSG. `</p><p>ppoll() ` The relationship between poll() and ppoll() is analogous to the relationship between <a href="./select.html">select(2)</a> and <a href="./pselect.html">pselect(2)</a>: like <a href="./pselect.html">pselect(2)</a>, ppoll() allows an application to safely wait until either a file de‚Äê scriptor becomes ready or until a signal is caught.</p><p>Other than the difference in the precision of the timeout argument, the following ppoll() call:</p><p>ready = ppoll(&fds, nfds, tmo_p, &sigmask);</p><p>is nearly equivalent to atomically executing the following calls:</p><p>sigset_t origmask;     int timeout;</p><p>timeout = (tmo_p == NULL) ? -1 :               (tmo_p->tv_sec * 1000 + tmo_p->tv_nsec / 1000000);     pthread_sigmask(SIG_SETMASK, &sigmask, &origmask);     ready = poll(&fds, nfds, timeout);     pthread_sigmask(SIG_SETMASK, &origmask, NULL);</p><p>The above code segment is described as nearly equivalent because whereas a negative timeout value for poll() is interpreted as an infinite timeout, a negative value expressed in *tmo_p results  in an error from ppoll().</p><p>See the description of <a href="./pselect.html">pselect(2)</a> for an explanation of why ppoll() is necessary.</p><p>If the sigmask argument is specified as NULL, then no signal mask manipulation is performed (and thus ppoll() differs from poll() only in the precision of the timeout argument).</p><p>The tmo_p argument specifies an upper limit on the amount of time that ppoll() will block.  This argument is a pointer to a <a href="./timespec.html">timespec(3)</a> structure.</p><p>If tmo_p is specified as NULL, then ppoll() can block indefinitely. `</p><h3 id="return-value">Return Value</h3><p>` On  success,  poll()  returns  a nonnegative value which is the number of elements in the pollfds whose revents fields have been set to a nonzero value (indicating an event or an error).  A return value of zero indicates that the system call timed out before any file descriptors became ready.</p><p>On error, -1 is returned, and errno is set to indicate the error. `</p><h3 id="errors">Errors</h3><p>` EFAULT fds points outside the process's accessible address space.  The array given as argument was not contained in the calling program's address space.</p><p>EINTR  A signal occurred before any requested event; see <a href="./signal.html">signal(7)</a>.</p><p>EINVAL The nfds value exceeds the RLIMIT_NOFILE value.</p><p>EINVAL (ppoll()) The timeout value expressed in *tmo_p is invalid (negative).</p><p>ENOMEM Unable to allocate memory for kernel data structures. `</p><h3 id="versions">Versions</h3><p>` On some other UNIX systems, poll() can fail with the error EAGAIN if the system fails to allocate kernel-internal resources, rather than  ENOMEM  as  Linux  does.   POSIX  permits  this  behavior. Portable programs may wish to check for EAGAIN and loop, just as with EINTR.</p><p>Some implementations define the nonstandard constant INFTIM with the value -1 for use as a timeout for poll().  This constant is not provided in glibc. `</p><p>C library/kernel differences ` The  Linux ppoll() system call modifies its tmo_p argument.  However, the glibc wrapper function hides this behavior by using a local variable for the timeout argument that is passed to the system call.  Thus, the glibc ppoll() function does not modify its tmo_p argument.</p><p>The raw ppoll() system call has a fifth argument, size_t sigsetsize, which specifies the size in bytes of the sigmask argument.  The glibc ppoll() wrapper function specifies  this  argument  as  a fixed value (equal to sizeof(kernel_sigset_t)).  See <a href="./sigprocmask.html">sigprocmask(2)</a> for a discussion on the differences between the kernel and the libc notion of the sigset. `</p><h3 id="standards">Standards</h3><p>` poll() POSIX.1-2008.</p><p>ppoll()        Linux. `</p><h3 id="history">History</h3><p>` poll() POSIX.1-2001.  Linux 2.1.23.</p><p>On older kernels that lack this system call, the glibc poll() wrapper function provides emulation using <a href="./select.html">select(2)</a>.</p><p>ppoll()        Linux 2.6.16, glibc 2.4. `</p><h3 id="notes">Notes</h3><p>` The operation of poll() and ppoll() is not affected by the O_NONBLOCK flag.</p><p>For a discussion of what may happen if a file descriptor being monitored by poll() is closed in another thread, see <a href="./select.html">select(2)</a>. `</p><h3 id="bugs">Bugs</h3><pre><code>See the discussion of spurious readiness notifications under the BUGS section of select(2).
</code></pre><h2 id="examples">Examples</h2><pre><code>The  program  below  opens  each  of  the files named in its command-line arguments and monitors the resulting file descriptors for readiness to read (POLLIN).  The program loops, repeatedly using
poll() to monitor the file descriptors, printing the number of ready file descriptors on return.  For each ready file descriptor, the program:
</code></pre><p>‚Ä¢  displays the returned revents field in a human-readable form;</p><p>‚Ä¢  if the file descriptor is readable, reads some data from it, and displays that data on standard output; and</p><p>‚Ä¢  if the file descriptor was not readable, but some other event occurred (presumably POLLHUP), closes the file descriptor.</p><p>` Suppose we run the program in one terminal, asking it to open a FIFO:</p><p>$ mkfifo myfifo $ ./poll_input myfifo</p><p>In a second terminal window, we then open the FIFO for writing, write some data to it, and close the FIFO:</p><p>$ echo aaaaabbbbbccccc > myfifo</p><p>In the terminal where we are running the program, we would then see:</p><p>Opened "myfifo" on fd 3     About to poll()     Ready: 1       fd=3; events: POLLIN POLLHUP         read 10 bytes: aaaaabbbbb     About to poll()     Ready: 1       fd=3; events: POLLIN POLLHUP         read 6 bytes: ccccc</p><p>About to poll()     Ready: 1       fd=3; events: POLLHUP         closing fd 3     All file descriptors closed; bye</p><p>In the above output, we see that poll() returned three times: `</p><p>‚Ä¢  On the first return, the bits returned in the revents field were POLLIN, indicating that the file descriptor is readable, and POLLHUP, indicating that the other end of the FIFO has been closed.           The program then consumed some of the available input.</p><p>‚Ä¢  The second return from poll() also indicated POLLIN and POLLHUP; the program then consumed the last of the available input.</p><p>‚Ä¢  On the final return, poll() indicated only POLLHUP on the FIFO, at which point the file descriptor was closed and the program terminated.</p><p>Program source</p><p>` /* poll_input.c</p><p>Licensed under GNU General Public License v2 or later. */ #include <fcntl.h> #include <poll.h> #include <stdio.h> #include <stdlib.h> #include <unistd.h></p><p>#define errExit(msg)    do { perror(msg); exit(EXIT_FAILURE); \                         } while (0)</p><p>int main(int argc, char *argv[]) {     int            ready;     char           buf[10];     nfds_t         num_open_fds, nfds;     ssize_t        s;     struct pollfd  *pfds;</p><p>if (argc < 2) {        fprintf(stderr, "Usage: %s file...\n", argv[0]);        exit(EXIT_FAILURE);     }</p><p>num_open_fds = nfds = argc - 1;     pfds = calloc(nfds, sizeof(struct pollfd));     if (pfds == NULL)         errExit("malloc");</p><p>/* Open each file on command line, and add it to 'pfds' array. */</p><p>for (nfds_t j = 0; j < nfds; j++) {         pfds[j].fd = open(argv[j + 1], O_RDONLY);         if (pfds[j].fd == -1)             errExit("open");</p><p>printf("Opened \"%s\" on fd %d\n", argv[j + 1], pfds[j].fd);</p><p>pfds[j].events = POLLIN;     }</p><p>/* Keep calling poll() as long as at least one file descriptor is        open. */</p><p>while (num_open_fds > 0) {         printf("About to poll()\n");         ready = poll(pfds, nfds, -1);         if (ready == -1)             errExit("poll");</p><p>printf("Ready: %d\n", ready);</p><p>/* Deal with array returned by poll(). */</p><p>for (nfds_t j = 0; j < nfds; j++) {             if (pfds[j].revents != 0) {                 printf("  fd=%d; events: %s%s%s\n", pfds[j].fd,                        (pfds[j].revents & POLLIN)  ? "POLLIN "  : "",                        (pfds[j].revents & POLLHUP) ? "POLLHUP " : "",                        (pfds[j].revents & POLLERR) ? "POLLERR " : "");</p><p>if (pfds[j].revents & POLLIN) {                     s = read(pfds[j].fd, buf, sizeof(buf));                     if (s == -1)                         errExit("read");                     printf("    read %zd bytes: %.*s\n",                            s, (int) s, buf);                 } else {                /* POLLERR | POLLHUP */                     printf("    closing fd %d\n", pfds[j].fd);                     if (close(pfds[j].fd) == -1)                         errExit("close");                     num_open_fds--;                 }             }         }     }</p><p>printf("All file descriptors closed; bye\n");     exit(EXIT_SUCCESS); } `</p><h2 id="see-also">See Also</h2><pre><code>restart_syscall(2), select(2), select_tut(2), timespec(3), epoll(7), time(7)
</code></pre><p>Linux man-pages 6.7                                                                              2023-10-31                                                                                         [<a href="./poll.html">poll(2)</a>](poll.html)</p></div>
    </article>
</body>

</html>
